{# templates/notary/pricing.html.twig #}
{% extends 'base.html.twig' %}

{% block body %}
	<div class="container py-5">
		<div class="text-center mb-5">
			<h2 class="fw-black">Choisissez votre forfait</h2>
			<p class="text-muted">Des offres adaptées à la taille de votre étude.</p>
		</div>

		<div class="row g-4 justify-content-center">
			{% for offer in offers %}
				{% set currentPrice = offer.currentPrice %}

				<div class="col-md-4">
					<div class="card h-100 shadow-sm border-0 rounded-4 p-2">
						<div
							class="card-body d-flex flex-column">

							{# Affichage du Badge si présent dans ton entité #}
							{% if offer.badge %}
								<div class="text-end mb-2">
									<span class="badge bg-primary-subtle text-primary rounded-pill">{{ offer.badge }}</span>
								</div>
							{% endif %}

							<h4 class="fw-bold mb-1">{{ offer.name }}</h4>

							<div class="mb-4">
								{% if currentPrice %}
									<span class="display-5 fw-black">{{ currentPrice.amountHt }}€</span>
									<span class="text-muted small">HT / mois</span>
								{% else %}
									<span class="text-muted">Tarif sur demande</span>
								{% endif %}
							</div>

							{# Description textuelle de l'offre #}
							<p class="text-muted small mb-4">{{ offer.description|nl2br }}</p>

							<ul class="list-unstyled mb-5 flex-grow-1">
								<li class="mb-3 d-flex align-items-center">
									<i class="fas fa-map-marked-alt text-indigo me-2"></i>
									<span>
										<strong>{{ offer.baseSectorsCount }}</strong>
										codes postaux inclus</span>
								</li>
								<li class="mb-3 d-flex align-items-center">
									<i class="fas fa-users text-indigo me-2"></i>
									<span class="small">Max
										{{ offer.maxNotariesPerSector }}
										notaires par code pastal</span>
								</li>
							</ul>

							<a href="{{ path('app_notary_subscribe', {'preselect': offer.id}) }}" class="btn btn-indigo btn-sm px-4 rounded-pill fw-bold shadow-sm py-2">
								Sélectionner
							</a>
						</div>
					</div>
				</div>
			{% endfor %}
		</div>
	</div>

	<style>
		.fw-black {
			font-weight: 900;
		}
		.text-indigo {
			color: #6366f1;
		}
		.btn-indigo {
			background-color: #6366f1;
			color: white;
		}
		.btn-indigo:hover {
			background-color: #4f46e5;
			color: white;
		}
	</style>
{% endblock %}
